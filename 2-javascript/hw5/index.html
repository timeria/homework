<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="#" />
    <title>Домашнее задание - занятие 4</title>
  </head>
  <body>
    <h1>Для задания 1</h1>
    <div class="task1">
      <a
        id="link1"
        data-type="text/html"
        hreflang="RU-ru"
        rel="nofollow"
        class="link link-active"
        target="_blank"
        title="Откроется в новой вкладке"
        href="/homework4-1.html"
      >
        Homework 4.1</a
      >
    </div>
    <div class="task1" id="task1-link"></div>
    <script>
      // 1. Напишите функцию JavaScript, чтобы получить значения атрибутов class, href, hreflang,
      // rel, target, title и data-type указанной ссылки. Полученный результат выведите в консоль.
      // 2. Напишите функцию удаления ссылки #link1 из DOM.
      // *3. Создайте точно такую же ссылку с помощью JavaScript и вставьте в #task1-link.
      // Решение:

      window.onload = function () {
        let link = document.getElementById("link1");
        console.log(link.className);
        console.log(link.href);
        console.log(link.hreflang);
        console.log(link.rel);
        console.log(link.target);
        console.log(link.title);
        console.log(link.dataset.type);
        link.remove();
        let link1 = document.createElement("a");
        link1.className = "link link-active";
        link1.textContent = "Homework 4.1";
        link1.setAttribute("href", "/homework4-1.html");
        link1.setAttribute("hreflang", "RU-ru");
        link1.setAttribute("rel", "nofollow");
        link1.setAttribute("target", "_blank");
        link1.setAttribute("title", "Откроется в новой вкладке");
        link1.setAttribute("data-type", "text/html");
        link1.setAttribute("id", "link1");
        let linkBlock = document.getElementById("task1-link");
        linkBlock.append(link1);
      };
    </script>

    <h1>Для задания 2</h1>
    <div class="task2">
      <div>Языки программирования:</div>
      <ul>
        <li>JavaScript</li>
        <li>Go</li>
        <li>TypeScript</li>
        <li><a href="#">PHP</a></li>
      </ul>
      <ol>
        <li>Green</li>
        <li>Yellow</li>
        <li>Red</li>
      </ol>
    </div>
    <script>
      // 2. Напишите код, с помощью которого можно получить:
      // 2.1. элемент <div>
      // 2.2. <ul>
      // 2.3. третий <li> первого списка (TypeScript)
      // 2.4. <a> (PHP)
      // *2.5. второй <li> второго списка (Yellow) через третий <li> первого списка (TypeScript)

      // Решение:
      window.onload = function () {
        let blockWrap = document.querySelector(".task2");
        let div = blockWrap.querySelector("div");
        let ul = blockWrap.querySelector("ul");
        let liThird = ul.querySelector("li:nth-child(3)");
        let lilink = ul.querySelector("li:last-child a");
        let liSecond = liThird.parentElement.nextElementSibling.children[1];
      };
    </script>

    <h1>Для задания 3</h1>
    <div class="task3" id="calendar"></div>
    <style>
      .task3 table {
        border-collapse: collapse;
      }

      .task3 td,
      .task3 th {
        border: 1px solid black;
        padding: 3px;
        text-align: center;
      }

      .task3 th {
        background-color: orange;
        font-weight: bold;
      }

      .task3 td.red {
        background-color: red;
      }
    </style>
    <script>
      // Создайте календарь в виде таблицы с помощью JavaScript
      // Напишите функцию newCalendar(elementLink, year, month).

      // Вызов функции newCalendar() создаст календарь для заданного месяца month в году year и вставить его внутрь elementLink.
      // Календарь должен быть в виде таблицы (тег table), где неделя – это <tr>, а день – это <td>.
      // У таблицы должен быть заголовок с названиями дней недели, каждый день – <th>.
      // Первый день недели в календаре - понедельник.
      // *Если выбран текущий месяц, подсветите красным текущий день на календаре.
      // Пример вызова функции: newCalendar(elementLink, 2022, 1) сгенерирует календарь calendar.png

      // Подсказки
      let year = 2022,
        month = 1;
      let date = new Date(year, month - 1); // Создание объекта Date для месяца month в году year (номерация начинается с 0)
      let day = date.getDay(); // Получение номера дня недели
      console.log(day);

      date.setDate(date.getDate() + 1);
      day = date.getDay(); // Получение номера дня в недели
      console.log(day);

      date.setDate(date.getDate() + 1);
      day = date.getDay();
      console.log(day);

      // Решение:
      function newCalendar(elementLink, year, month) {
        let date = new Date(year, month - 1);
        let dayMonthLast = new Date(year, month, 0).getDate();
        let lastDayOfLastMonth = new Date(year, month - 1, 0).getDate();
        const DaysOfWeek = ["Пн", "Вт", "Ср", "Чт", "Пт", "Сб", "Вс"];
        const currMonth = date.getMonth();
        const currYear = date.getFullYear();
        let html = "<table><thead><tr class='days'>";
        for (let i = 0; i < DaysOfWeek.length; i++) {
          html += "<th>" + DaysOfWeek[i] + "</th>";
        }
        html += "</tr></thead>";
        let j = 1;

        do {
          let day = new Date(year, month - 1, j).getDay();
          let dayMonthFirst = 0;
          if (day == 0) {
            dayMonthFirst = new Date(year, month - 1, 0).getDay();
          } else {
            dayMonthFirst = new Date(year, month - 1, 1).getDay() - 1;
          }
          if (day == 1) {
            html += "<tr>";
          } else if (j == 1) {
            html += "<tr>";
            let k = lastDayOfLastMonth - dayMonthFirst;
            for (let m = 0; m < dayMonthFirst; m++) {
              html += "<td></td>";
              k++;
            }
          }
          const dayToday = new Date();
          const dayTodayY = dayToday.getFullYear();
          const dayTodayM = dayToday.getMonth();
          const dayTodayD = dayToday.getDate();
          if (
            dayTodayY == currYear &&
            dayTodayM == currMonth &&
            j == dayTodayD
          ) {
            html += "<td class='red'>" + j + "</td>";
          } else {
            html += "<td>" + j + "</td>";
          }

          if (day == 0) {
            html += "</tr>";
          } else if (j == dayMonthLast) {
            let k = 1;
            for (day; day < 7; day++) {
              html += "<td></td>";
              k++;
            }
          }
          j++;
        } while (j <= dayMonthLast);

        elementLink.innerHTML = html;
      }
      console.log(newCalendar(document.getElementById("calendar"), 2023, 12));
    </script>
  </body>
</html>
